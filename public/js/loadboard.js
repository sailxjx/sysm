// Generated by CoffeeScript 1.3.3
(function() {
  var getBoardUrl, loadBoards, popen;

  loadBoards = function() {
    return $('.board').each(function() {
      var bUrl, bd;
      bd = $(this).attr('board');
      if (bd) {
        bUrl = getBoardUrl($(this).attr('board'));
        $(this).load(bUrl);
        if (!$(this).attr('target-url')) {
          $(this).attr('target-url', bUrl);
        }
      }
      $(this).click(function() {
        var tUrl;
        if (tUrl = $(this).attr('target-url')) {
          return popen(tUrl);
        }
      });
      $(this).mouseenter(function() {
        return $(this).addClass('board-hover');
      });
      return $(this).mouseleave(function() {
        return $(this).removeClass('board-hover');
      });
    });
  };

  getBoardUrl = function(name) {
    return "http://sysm.local.com/board/" + name;
  };

  popen = function(url) {
    $('#popback').show();
    return $('#popen').load(url, function() {
      return $(this).fadeIn(100, function() {
        return $(this).css({
          'width': '80%',
          'margin-left': '-40%'
        });
      });
    });
  };

  $('#popback').click(function() {
    return $('#popen').css({
      'width': '0',
      'margin-left': '0'
    }).fadeOut(500, function() {
      return $('#popback').hide();
    });
  });

  $('#popen').click(function(e) {
    return e.stopPropagation();
  });

  loadBoards();

}).call(this);
