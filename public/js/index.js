// Generated by CoffeeScript 1.3.3
(function() {
  var bindPopen, getBoardUrl, loadBoards, popen;

  loadBoards = function() {
    return $('.board').each(function() {
      var bUrl, bd;
      bd = $(this).attr('board');
      if (bd) {
        bUrl = getBoardUrl($(this).attr('board'));
        $(this).load(bUrl);
        if (!$(this).attr('target-url')) {
          $(this).attr('target-url', bUrl);
        }
      }
      $(this).mouseenter(function() {
        if ($(this).hasClass('bp')) {
          return $(this).addClass('board-hover');
        }
      });
      return $(this).mouseleave(function() {
        return $(this).removeClass('board-hover');
      });
    });
  };

  getBoardUrl = function(name) {
    return "/board/" + name;
  };

  popen = function(url) {
    $('#popback').show();
    return $('#popen').fadeIn(100, function() {
      return $(this).animate({
        'width': '80%',
        'margin-left': '-40%'
      }, 300, function() {
        return $(this).load(url);
      });
    });
  };

  bindPopen = function() {
    $('.bp').click(function() {
      var tUrl;
      if (tUrl = $(this).attr('target-url')) {
        return popen(tUrl);
      }
    });
    $('#popback').click(function() {
      $('#popen').children('.bcon').fadeOut();
      return $('#popen').css({
        'width': '0',
        'margin-left': '0'
      }).fadeOut(500, function() {
        return $('#popback').hide();
      });
    });
    return $('#popen').click(function(e) {
      return e.stopPropagation();
    });
  };

  loadBoards();

  bindPopen();

}).call(this);
